const axios = require('axios');

// Test the exact URLs that should be generated by the script
const testUrls = [
    'http://web.archive.org/web/20060519074007id_/http://www.msbn.tv/usavision/networks/USAVision/css/siteStyle.css',
    'http://web.archive.org/web/20060519074007id_/http://www.msbn.tv/usavision/networks/USAVision/menu/menu.css'
];

async function testUrl(url) {
    console.log(`\nTesting: ${url}`);
    try {
        const response = await axios({
            url: url,
            method: 'GET',
            responseType: 'arraybuffer',
            timeout: 10000,
            maxRedirects: 0,  // Don't follow redirects
            validateStatus: (status) => status < 400
        });
        console.log(`  âœ“ Success! Status: ${response.status}, Size: ${response.data.length} bytes`);
        console.log(`  Headers:`, response.headers);
        // Show first 100 chars
        const preview = response.data.toString('utf8').substring(0, 100);
        console.log(`  Preview: ${preview}...`);
    } catch (e) {
        console.log(`  âœ— Failed: ${e.message}`);
        if (e.code) console.log(`  Error code: ${e.code}`);
        if (e.response) {
            console.log(`  Response status: ${e.response.status}`);
            console.log(`  Response headers:`, e.response.headers);
        }
    }
}

async function main() {
    for (const url of testUrls) {
        await testUrl(url);
    }
}

main();
